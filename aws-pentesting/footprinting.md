# Footprinting

Estructura de ataque y definición del alcance:

<figure><img src="../.gitbook/assets/image (1) (1).png" alt=""><figcaption><p><a href="https://www.sans.org/blog/pen-testing-in-the-cloud/">https://www.sans.org/blog/pen-testing-in-the-cloud/</a></p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (3).png" alt=""><figcaption><p>Modelo de resposabilidad compartida</p></figcaption></figure>

## Configurar AWS CLI

```bash
aws configure
```

Requieres otorgar

* AWS Access KEY ID
* AWS Secret Access Key
* Region (importante especificar la región correcta)
* Formato (json)

### Formato de comandos en aws

{% hint style="info" %}
aws \<Comando | Servicio aws> \<Sub comando> (Opciones y parámetros)
{% endhint %}

```
aws s3 ls s3://important-bucket --recursive
```

## Whoami

El primer comando no requiere de permisos, solo te dara información básica

```
aws sts get-caller-identity
```

Este comando interactua con el servicio de IAM, requiere almenos privilegios de Get\*

```
aws aim get-user
```

### Almacenamiento de credenciales de AWS en archivo plano

Cuando se realiza una autenticación con aws CLI, las credenciales importantes como **Access Key y el Secret Access Key** se almacenan en los directorios:

* (Windows) - C:\Users\Gerh.aws\credentials&#x20;
* (Linux) - /root/.aws/credentials&#x20;
* (Linux) - /home/User/.aws/credentials

Donde podrás encontrar los siguientes datos:&#x20;

* aws\_access\_key\_id = Clave de acceso de AWS – (AWS access key).&#x20;
* aws\_secret\_access\_key = Clave secreta de AWS. – (AWS secret key).&#x20;
* aws\_session\_token = Token de sesión de AWS. Solo se requiere un token de sesión si está utilizando credenciales de seguridad temporales. – (AWS session token).

## Referencias

{% embed url="https://aws.amazon.com/es/compliance/shared-responsibility-model/" %}

{% embed url="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" %}

{% embed url="https://docs.aws.amazon.com/es_es/cli/latest/userguide/cli-chap-welcome.html" %}

