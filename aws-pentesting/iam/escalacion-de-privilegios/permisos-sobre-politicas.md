# Permisos sobre políticas

Es crucial restringir los permisos en las políticas de AWS tanto como limitar los permisos de los usuarios en sus cuentas y en las de otros usuarios. Las políticas son las que conceden los permisos a los usuarios, ya sea como parte de un grupo o al asumir roles. Los permisos se asignan a través de las políticas aplicadas a esos grupos y roles. Por lo tanto, los administradores deben ser muy cuidadosos al otorgar permisos a los usuarios en relación a las políticas. Específicamente, los siguientes permisos de política pueden conducir a una escalada de privilegios:

* iam:CreatePolicyVersion
* iam:SetDefaultPolicyVersion
* iam:AttachUserPolicy
* iam:AttachGroupPolicy
* iam:AttachRolePolicy
* iam:PutUserPolicy
* iam:PutGroupPolicy
* iam:PutRolePolicy

El permiso para crear una nueva versión de la política le permite a un usuario reemplazar completamente los permisos en una política. Si esta política se aplica a ellos, esto abre la puerta para que el usuario simplemente se asigne privilegios administrativos completos de AWS. Adjuntar una política o crear una nueva política para un usuario, grupo o función puede aumentar de manera similar los permisos aplicados al usuario.



## IAM:CreatePolicyVersion

Si un atacante tiene el permiso **iam:CreatePolicyVersion** en AWS, puede crear una nueva versión de una política ya existente. Esto significa que podrían crear una política que permita más permisos de los que tienen actualmente, lo que podría comprometer la seguridad del sistema.

{% embed url="https://github.com/BishopFox/iam-vulnerable#supported-privilege-escalation-paths" %}
Lab: IAM - Vulnerable | Escenario: privesc1
{% endembed %}

### Configuración inicial

Usuario del laboratorio: privesc1-CreateNewPolicyVersion-user



